<?xml version="1.0" encoding="UTF-8"?>
<!-- mapper에 대한 선언문 -->
<!DOCTYPE mapper PUBLIC
   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>

<mapper namespace="com.dumveloper.damo.diary.dao.DiaryDAO">

<select id="diaryDetail" resultType="damo"  parameterType="String">
SELECT * FROM diary WHERE TO_CHAR(d_date,'YYYY-MM-DD') = #{param1} AND u_id=#{param2}
</select>

<select id="diaryStartData" resultType="damo" parameterType="String">
SELECT C.C_TARKCAL, C.C_TAREXE, C.C_DATE, u.u_weight, u.u_id, u.u_height
	FROM USERINFO U ,CALENDER C 
	WHERE U.U_ID=C.U_ID AND U.U_ID = #{param2}
	AND TO_CHAR(C.C_DATE,'YYYY-MM') = #{param1}
</select>

<insert id="diaryInsert" 
   useGeneratedKeys="true"
   keyColumn="d_no"
   keyProperty="d_no"
   parameterType="damo"
   >
	INSERT INTO diary (d_no, u_id, d_date,d_weight,d_carbo,d_protein,d_fat,d_code,d_tarexe,d_tarkcal) VALUES
		(d_no_seq.NEXTVAL,#{u_id},#{d_date},#{u_weight},#{d_carbo},#{d_protein},#{d_fat},'D001',#{c_tarExe},#{c_tarKcal})
</insert>

<update id="memoUpdate" parameterType="String">
	UPDATE diary SET d_memo = #{param2} WHERE d_no = #{param1}
</update>

<update id="weightUpdate" parameterType="String">
	UPDATE diary SET d_weight = #{param2} WHERE d_no = #{param1}
</update>

<update id="eatTarKcalUpdate" parameterType="String">
	UPDATE diary SET d_tarKcal = #{param2} WHERE d_no = #{param1}
</update>

<update id="exeTarKcalUpdate" parameterType="String">
	UPDATE diary SET d_tarExe = #{param2} WHERE d_no = #{param1}
</update>

<select id="searchFood" resultType="damo">
	SELECT FOOD_NAME, FOOD_WEIGHT, FOOD_CALORIE, FOOD_CARBO, FOOD_PROTEIN, FOOD_FAT FROM FOODLIST WHERE REPLACE(FOOD_NAME,' ','') LIKE '%'||#{param1}||'%'
</select>

<select id="searchExe" resultType="damo">
	SELECT MET_NAME, MET FROM MET WHERE REPLACE(MET_NAME,' ','') LIKE '%'||#{param1}||'%'
</select>
<<<<<<< HEAD

<insert id="checkList" 
   useGeneratedKeys="true"
   keyColumn="ch_no"
   keyProperty="ch_no"
   parameterType="damo"
   >
	INSERT INTO checkList_diary (ch_no,cd_no, cd_content, cd_checkyn) VALUES
		(ch_no_seq.NEXTVAL,#{param1}, #{param2},'Y')
</insert>

=======
>>>>>>> d1f4ff54e53ef25e9618462937c431af604d685e
</mapper>